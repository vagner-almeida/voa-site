<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>VOA CRM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />

  <!-- Firebase SDKs (COMPAT) -->
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-storage-compat.js"></script>
</head>

<body>

<header class="topbar">
  <h1>VOA CRM</h1>
  <div class="topbar-right">
    <span id="user-email" class="muted"></span>
    <button id="logout-btn" class="btn secondary hidden">Sair</button>
  </div>
</header>

<!-- LOGIN -->
<section id="auth-section" class="card">
  <h2>Acesso restrito</h2>

  <form id="login-form" class="form">
    <label>
      E-mail
      <input id="login-email" type="email" placeholder="seu@email.com" required />
    </label>
    <label>
      Senha
      <input id="login-password" type="password" placeholder="******" required />
    </label>
    <button class="btn primary" type="submit">Entrar</button>
  </form>

  <button id="create-user-btn" class="btn ghost">Criar usuário (admin)</button>
  <p id="auth-message" class="message"></p>
</section>

<!-- APP -->
<section id="app-section" class="hidden">

  <div class="tabs">
    <button class="tab-btn active" data-tab="clients">Clientes</button>
    <button class="tab-btn" data-tab="suppliers">Fornecedores</button>
    <button class="tab-btn" data-tab="equipment">Equipamentos</button>
  </div>

  <!-- FORM: CLIENTS/SUPPLIERS -->
  <form id="entity-form" class="card">
    <h2 id="form-title">Novo cliente</h2>

    <input type="hidden" id="entity-id" />

    <div class="grid2">
      <label>
        Nome / Razão Social
        <input id="name" placeholder="Ex: Jotun Tintas" required />
      </label>

      <label>
        CPF / CNPJ
        <input id="document" placeholder="Somente números ou com máscara" />
      </label>
    </div>

    <div class="grid2">
      <label>
        Contato
        <input id="contact-person" placeholder="Ex: Fulano" />
      </label>

      <label>
        E-mail
        <input id="email" type="email" placeholder="contato@empresa.com" />
      </label>
    </div>

    <div class="grid2">
      <label>
        Telefone
        <input id="phone" placeholder="+55..." />
      </label>

      <label>
        Cidade
        <input id="city" placeholder="Ex: Rio Grande" />
      </label>
    </div>

    <div class="actions">
      <button class="btn primary" type="submit">Salvar</button>
      <button class="btn secondary" type="button" id="clear-btn">Limpar</button>
      <span id="form-message" class="message"></span>
    </div>
  </form>

  <!-- FORM: EQUIPMENT -->
  <form id="equipment-form" class="card hidden">
    <h2 id="equipment-form-title">Novo equipamento</h2>

    <input type="hidden" id="equipment-id" />

    <div class="grid2">
      <label>
        Tag / ID
        <input id="eq-tag" placeholder="Ex: DFT-01" required />
      </label>

      <label>
        Tipo
        <input id="eq-type" placeholder="Ex: DFT gauge / Pit gauge / Hygrometer" required />
      </label>
    </div>

    <div class="grid2">
      <label>
        Marca / Modelo
        <input id="eq-model" placeholder="Ex: Elcometer 456" />
      </label>

      <label>
        Nº de série
        <input id="eq-serial" placeholder="Ex: SN12345" />
      </label>
    </div>

    <div class="grid3">
      <label>
        Última calibração
        <input id="eq-last-cal" type="date" required />
      </label>

      <label>
        Intervalo (meses)
        <input id="eq-interval" type="number" min="1" step="1" value="12" required />
      </label>

      <label>
        Avisar (dias antes)
        <input id="eq-alert-days" type="number" min="1" step="1" value="30" required />
      </label>
    </div>

    <label>
      Laboratório / Fornecedor (opcional)
      <input id="eq-lab" placeholder="Ex: Lab XYZ" />
    </label>

    <label>
      Certificado de calibração (PDF)
      <input id="eq-cert" type="file" accept="application/pdf" />
      <div id="eq-cert-current" class="small muted"></div>
    </label>

    <label>
      Observações (opcional)
      <textarea id="eq-notes" rows="3" placeholder="Ex: Certificado anexado por e-mail, recalibração mid-Jan..."></textarea>
    </label>

    <div class="actions">
      <button class="btn primary" type="submit">Salvar</button>
      <button class="btn secondary" type="button" id="equipment-clear-btn">Limpar</button>
      <span id="equipment-form-message" class="message"></span>
    </div>
  </form>

  <!-- LIST -->
  <div class="card">
    <div class="listbar">
      <div class="listbar-left">
        <h2 id="list-title">Clientes cadastrados</h2>
        <p id="list-subtitle" class="muted"></p>
      </div>

      <div class="listbar-right">
        <input id="search" placeholder="Buscar..." />
        <select id="eq-filter" class="hidden">
          <option value="all">Todos</option>
          <option value="due">Vencendo</option>
          <option value="overdue">Vencidos</option>
          <option value="ok">OK</option>
        </select>
        <button id="export-btn" class="btn ghost" type="button">Exportar CSV</button>
      </div>
    </div>

    <div class="tablewrap">
      <table>
        <thead id="thead-entity">
          <tr>
            <th>Nome</th>
            <th>Documento</th>
            <th>Cidade</th>
            <th>Ações</th>
          </tr>
        </thead>

        <thead id="thead-equipment" class="hidden">
          <tr>
            <th>Tag</th>
            <th>Tipo</th>
            <th>Serial</th>
            <th>Próx. calibração</th>
            <th>Status</th>
            <th>Dias</th>
            <th>Ações</th>
          </tr>
        </thead>

        <tbody id="entity-tbody"></tbody>
      </table>
    </div>

    <p id="list-message" class="message"></p>
  </div>

</section>

<!-- cache-buster: aumente se precisar -->
<script src="app.js?v=12"></script>

</body>
</html>
